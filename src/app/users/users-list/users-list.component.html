@if(!isDataLoading()) {
<div class="header">
  <span class="title">Users</span>
  <app-search-textfield
    (valueChange)="onSearchChange($event)"
    [loading]="isSearchLoading()"
  ></app-search-textfield>
  <button mat-fab color="primary" routerLink="/users/add" class="add-button">
    <mat-icon>add</mat-icon>
  </button>
</div>
<div class="table-wrapper">
  <table
    mat-table
    [dataSource]="dataSource"
    matSort
    (matSortChange)="onSort($event)"
  >
    <!-- Full Name Column -->
    <ng-container matColumnDef="fullName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Full Name</th>
      <td mat-cell *matCellDef="let element" class="text-column">
        {{ element.fullName }}
      </td>
    </ng-container>

    <!-- Email Column -->
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
      <td mat-cell *matCellDef="let element" class="text-column">
        {{ element.email }}
      </td>
    </ng-container>

    <!-- Last Login Date Column -->
    <ng-container matColumnDef="lastLogin">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Login</th>
      <td mat-cell *matCellDef="let element" class="date-column">
        {{ element.lastLogin | date : "dd/MM/yyyy - hh:mm:ss" }}
      </td>
    </ng-container>

    <!-- Edit Icon -->
    <ng-container matColumnDef="edit-icon">
      <th
        mat-header-cell
        *matHeaderCellDef
        style="width: 80px; text-align: center"
      >
        Edit
      </th>
      <td mat-cell *matCellDef="let element" style="width: 80px">
        <button mat-icon-button [routerLink]="'/users/' + element.id">
          <mat-icon>edit</mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="delete-icon">
      <th
        mat-header-cell
        *matHeaderCellDef
        style="width: 80px; text-align: center"
      >
        Delete
      </th>
      <td mat-cell *matCellDef="let element" style="width: 80px">
        <button mat-icon-button (click)="onDelete(element.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>

<mat-paginator
  [pageIndex]="pagination().pageNumber - 1"
  [pageSize]="pagination().pageSize"
  [length]="totalRecords()"
  (page)="onPageChange($event)"
></mat-paginator>
} @else {
<app-skeleton style="height: 42px; margin-bottom: 10px"></app-skeleton>
<div class="table-skeleton">
  <app-skeleton style="min-height: 56px"></app-skeleton>
  @for(item of dummyArray(); track $index) {
  <app-skeleton style="min-height: 70px"></app-skeleton>
  }
</div>
<app-skeleton style="min-height: 56px; margin-top: 3px"></app-skeleton>
}
